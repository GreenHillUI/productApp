"use strict";(self.webpackChunkproductapp=self.webpackChunkproductapp||[]).push([[254],{5254:(t,r,e)=>{e.r(r),e.d(r,{default:()=>b});var n=e(9669),o=e.n(n),c=e(4222),a=e(7294),u=e(6113),i=e(9472),s=e(5893);const l=(0,u.$j)(null,(function(t){return{setProductId:function(r){return t({type:"SETPRODUCTID",id:r})}}}))((function(t){var r=t.product,e=t.setProductId;return(0,s.jsxs)("li",{children:[(0,s.jsx)("button",{type:"button",className:"product-button",onClick:function(){return e(r.id)},children:(0,s.jsx)("img",{src:r.img,alt:"A thumbnail of ".concat(r.name)})}),(0,s.jsx)("h3",{children:"".concat(r.category)}),(0,s.jsx)("h2",{children:"".concat(r.name)}),(0,s.jsx)("h3",{children:"$".concat(r.price)}),(0,s.jsx)(i.Z,{rating:r.ratings})]})}));function d(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,c=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(c.push(n.value),!r||c.length!==r);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return c}}(t,r)||function(t,r){if(t){if("string"==typeof t)return f(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}const p=(0,u.$j)((function(t){return{related:t.relatedProducts}}))((function(t){var r=t.related,e=d((0,a.useState)(0),2),n=e[0],o=e[1],c=d((0,a.useState)(0),2),u=c[0],i=c[1],f=d((0,a.useState)(0),2),p=f[0],h=f[1];return(0,a.useEffect)((function(){try{i(document.querySelector(".product-carrousel ul").childNodes.length),h(document.querySelector(".product-carrousel").offsetWidth)}catch(t){}})),(0,s.jsxs)("section",{id:"related-products",children:[(0,s.jsx)("h1",{children:"Related Products"}),(0,s.jsxs)("div",{className:"product-carrousel",children:[(0,s.jsx)("ul",{style:{"margin-left":-n},children:r.map((function(t){return(0,s.jsx)(l,{product:t},t.id)}))}),n?(0,s.jsx)("button",{"aria-label":"left",type:"button",onClick:function(){return o(n-320)},children:"❮"}):null,n+p<320*u?(0,s.jsx)("button",{"aria-label":"right",type:"button",onClick:function(){return o(n+320)},children:"❯"}):null]})]})}));var h=c.Z.getState().productId;function y(t,r){if(r[1].data.results){var e,n=r[0].data,o=(e=r[1].data.results).filter((function(t){return t["default?"]}))[0]||e[0],c=r[2].data;t({type:"ADDRELATEDPRODUCT",product:{id:n.id,img:o.photos[0].thumbnail_url,name:n.name,category:n.category,price:o.original_price,sale:o.sale_price,ratings:c.ratings}})}else console.error("error retrieving style data")}var m=function(t){var r=o().get("/a/products/".concat(h,"/related")).then((function(e){var n=e.data;n.filter((function(t,r){return n.indexOf(t)===r})).forEach((function(e){r=r.then((function(){return Promise.all([o().get("/a/products/".concat(e)),o().get("/a/products/".concat(e,"/styles")),o().get("/a/reviews/".concat(e,"/meta"))])})).then(y.bind(null,t))}))})).catch((function(t){return console.error(t.message)}))};c.Z.subscribe((function(){h!==(h=c.Z.getState().productId)&&c.Z.dispatch(m)})),c.Z.dispatch(m);const b=p},9472:(t,r,e)=>{e.d(r,{Z:()=>a}),e(7294);var n=e(155),o=e(5893);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}const a=function(t){var r,e,a=t.rating;return(0,o.jsxs)("div",{className:"stars",children:[(0,o.jsxs)("div",{className:"empty-stars",children:[(0,o.jsx)(n.JiI,{}),(0,o.jsx)(n.JiI,{}),(0,o.jsx)(n.JiI,{}),(0,o.jsx)(n.JiI,{}),(0,o.jsx)(n.JiI,{})]}),(0,o.jsxs)("div",{className:"star-rating",style:(r=a,e=5,"object"===c(r)?e=function(t){var r=0,e=0;return Object.keys(t).forEach((function(n){r+=Number(t[n]),e+=Number(n)*t[n]})),e/r}(r):"number"==typeof r&&(e=r),(e=5*Math.round(4*e))%20<10?e+=3:e%20>10&&(e-=3),{width:"".concat(e,"%")}),children:[(0,o.jsx)(n.T8x,{}),(0,o.jsx)(n.T8x,{}),(0,o.jsx)(n.T8x,{}),(0,o.jsx)(n.T8x,{}),(0,o.jsx)(n.T8x,{})]})]})}}}]);